function checkLoginState(){FB.getLoginStatus(function(e){statusChangeCallback(e)})}function statusChangeCallback(e){"connected"===e.status?(loading(),callAPI(function(e){$("#result").DataTable({processing:!0,searching:!0,retrieve:!0,paging:!0,data:e,columns:[{title:"ID",data:"id"},{title:"Name",data:"name"},{title:"Picture",data:"picture"},{title:'<img src="img/like.gif" width="36px"/><span>Like</span>',data:"type.like"},{title:'<img src="img/love.gif" width="36px"/><span>Love</span>',data:"type.love"},{title:'<img src="img/haha.gif" width="36px"/><span>Haha</span>',data:"type.haha"},{title:'<img src="img/wow.gif" width="36px"/><span>Wow</span>',data:"type.wow"},{title:'<img src="img/sad.gif" width="36px"/><span>Sad</span>',data:"type.sad"},{title:'<img src="img/angry.gif" width="36px"/><span>Angry</span>',data:"type.angry"}]}),loadDataSuccess()})):noLogin()}function callAPI(e){var t=[];FB.api("/me/feed?fields=reactions{type,name}&limit=100",function(a){a.data.forEach(function(e){e.reactions&&e.reactions.data.forEach(function(e){var a=t.filter(function(t){return t.id===e.id})[0];if(a)countReactionType(a,e.type);else{var n={id:e.id,name:e.name,picture:"#",type:{like:0,love:0,haha:0,wow:0,sad:0,angry:0}};countReactionType(n,e.type),t.push(n)}})}),e(t)})}function countReactionType(e,t){switch(t){case"LIKE":e.type.like+=1;break;case"LOVE":e.type.love+=1;break;case"HAHA":e.type.hana+=1;break;case"WOW":e.type.wow+=1;break;case"SAD":e.type.sad+=1;break;case"ANGRY":e.type.angry+=1;break;default:e.type.like+=1}}function loadDataSuccess(){document.getElementById("retrievingData").style.display="none",document.getElementById("displayData").style.display="block"}function noLogin(){document.getElementById("retrievingData").style.display="none",document.getElementById("displayData").style.display="none"}function loading(){document.getElementById("retrievingData").style.display="block",document.getElementById("displayData").style.display="none"}!function(e,t,a){var n,i=e.getElementsByTagName(t)[0];e.getElementById(a)||((n=e.createElement(t)).id=a,n.src="//connect.facebook.net/en_US/sdk.js",i.parentNode.insertBefore(n,i))}(document,"script","facebook-jssdk"),window.fbAsyncInit=function(){FB.init({appId:"1936178549961973",cookie:!0,xfbml:!0,version:"v2.9"});var e=function(){checkLoginState()};FB.Event.subscribe("xfbml.render",e)};